function numberWithDelimiter(t){return 0!==t?formatFixed(t):null}function numberToHumanSize(t){var e=1e3;if(t<e)return t+" B";var r=["KB","MB","GB","TB","PB"],n=-1;do{t/=e,++n}while(t>=e);return t.toFixed(1)+" "+r[n]}function datePartsToDate(t){var e=t.length;if(0===e||e>3)return null;for(var r=0;r<e;++r)t[r]<10?t[r]="0"+t[r]:t[r]=""+t[r];var n=Date.parse(t.join("-")+"T12:00");return new Date(n)}function formattedDate(t){var e=new Date(Date.parse(t));switch(t.length){case 4:return formatYear(e);case 7:return formatMonthYear(e);case 10:return formatDate(e);default:return formatDateTime(e)}}function formattedPastDate(t){return formatISO(d3.time.day.offset(new Date,-t))}function paginate(t,e){if(""!==t.meta.page&&t.meta.total_pages>1){var r=t.meta.page>1?"\xab":null,n=t.meta.page<t.meta.total_pages?"\xbb":null;d3.select(e).append("div").attr("id","paginator").attr("class","text-center"),$("#paginator").bootpag({total:t.meta.total_pages,page:t.meta.page,maxVisible:10,href:t.href,leaps:!1,prev:r,next:n})}}function pathForWork(t){return void 0===t?"":"http://doi.org/"===t.substring(0,15)||"http://www.ncbi.nlm.nih.gov/pubmed/"===t.substring(0,35)||"http://www.ncbi.nlm.nih.gov/pmc/works/PMC"===t.substring(0,41)||"http://www.ncbi.nlm.nih.gov/pmc/works/PMC"===t.substring(0,41)||"http://arxiv.org/abs/"===t.substring(0,21)||"http://n2t.net/"===t.substring(0,15)?t.replace(/^https?:\/\//,""):t}function signpostsFromWork(t,e,r,n){var a="",i=[],o="";void 0!==r&&""!==r?a=r:void 0!==n&&""!==n&&(a=n),""!==a&&(o=e.filter(function(t){return t.id===a})[0]),void 0!==o&&""!==o&&i.push(formattedSignpost(o.title,t.results[a],a));for(var u in t.results)void 0!==(o=e.filter(function(t){return t.id===u&&t.id!==a})[0])&&o!=={}&&i.push(formattedSignpost(o.title,t.results[u],u));return i}function formattedSignpost(t,e,r){return{title:t,count:e,name:r}}function relationToString(t,e,r){var n=e.filter(function(e){return e.id===t.source_id})[0];void 0!==n&&""!==n||(n={});var a=r.filter(function(e){return e.id===t.relation_type_id})[0];return void 0!==a&&""!==a||(a={}),[a.title," via "+n.title]}function metadataToString(t,e){var r=t["container-title"]?" via "+t["container-title"]:"",n=e.filter(function(e){return e.id===t.work_type_id})[0];return void 0!==n&&""!==n||(n={title:"Work"}),n.title+" published "+formattedDate(t.published)+r}function formattedAuthorList(t){switch(t=t.map(function(t){return formattedAuthor(t)}),t.length){case 0:case 1:case 2:return t.join(" & ");case 3:case 4:return t.slice(0,-1).join(", ")+" & "+t[t.length-1];default:return t.slice(0,3).join(", ")+", <em>et al</em>"}}function formattedAuthor(t){var e="undefined"!=typeof t.given?t.given:"",r="undefined"!=typeof t.family?t.family:"",n=[e,r].join(" "),n="undefined"!=typeof t.ORCID?'<a href="/contributors/'+t.ORCID.substring(7)+'">'+n+"</a>":n;return n}function formattedCreatorList(t){switch(t=t.map(function(t){return formattedCreator(t)}),t.length){case 0:case 1:case 2:return t.join(" & ");case 3:case 4:return t.slice(0,-1).join(", ")+" & "+t[t.length-1];default:return t.slice(0,3).join(", ")+", <em>et al</em>"}}function formattedCreator(t){return["undefined"!=typeof t.givenName?t.givenName:"","undefined"!=typeof t.familyName?t.familyName:""].join(" ")}function formattedState(t){return"failed"===t?'<span class="label label-fatal">failed</span>':t}function getParameterByName(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),n=r.exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function isEmpty(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}function removeEmpty(t){return Object.keys(t).forEach(function(e){t[e]&&"object"==typeof t[e]&&removeEmpty(t[e])||(""===t[e]||null===t[e])&&delete t[e]}),t}function getCookieValue(t){var e=document.cookie.match("(^|;)\\s*"+t+"\\s*=\\s*([^;]+)");return e?e.pop():""}var formatDate=d3.time.format.utc("%B %d, %Y"),formatISO=d3.time.format.utc("%Y-%m-%d"),formatMonthYear=d3.time.format.utc("%B %Y"),formatYear=d3.time.format.utc("%Y"),formatDateTime=d3.time.format.utc("%d %b %Y %H:%M UTC"),formatTime=d3.time.format.utc("%H:%M UTC"),formatWeek=d3.time.format.utc("%U"),formatHour=d3.time.format.utc("%H"),formatNumber=d3.format(",d"),formatFixed=d3.format(",.0f"),formatPercent=d3.format(",.0%");